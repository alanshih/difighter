$(document).ready(function(){function t(t,e){if(e>0)setTimeout(function(){var e=document.createElement("audio");e.setAttribute("src",o+"assets/audio/"+t+".mp3"),e.setAttribute("autoplay","autoplay"),e.load(),e.play()},2e3);else{var a=document.createElement("audio");a.setAttribute("src",o+"assets/audio/"+t+".mp3"),a.setAttribute("autoplay","autoplay"),a.load(),a.play()}}function e(e){t("round-1",0),$("#subject .round-"+e).fadeIn(500,function(){var e=$(this).attr("data-winner");setTimeout(function(){i(e),t("punch-1",0)},500),$(this).delay(2e3).fadeOut(500)})}function a(t){var e='<img src="'+o+'assets/img/winner-symbol.png" />';setTimeout(function(){$("#player-names ."+t+" .trophy").append(e)},1e3)}function i(t){"player_1"==t?($("#fighters .player-2 .hit").removeClass("hide"),$("#fighters .player-2 .standing").removeClass("hide"),$("#fighters .player-2 .fighting").addClass("hide"),$("#fighters .player-1 .hit").addClass("hide"),$("#fighters .player-1 .standing").addClass("hide"),$("#fighters .player-1 .fighting").removeClass("hide")):($("#fighters .player-1 .hit").removeClass("hide"),$("#fighters .player-1 .standing").removeClass("hide"),$("#fighters .player-1 .fighting").addClass("hide"),$("#fighters .player-2 .hit").addClass("hide"),$("#fighters .player-2 .standing").addClass("hide"),$("#fighters .player-2 .fighting").removeClass("hide")),a(t)}function n(){$("#fighters .player-box .hit").addClass("hide"),$("#fighters .player-box .standing").removeClass("hide"),$("#fighters .player-box .fighting").addClass("hide")}function s(){var e=$("#battle-fight").attr("data-winner");"player_1"==e?($("#fighters .player-1 .hit").addClass("hide"),$("#fighters .player-1 .standing").removeClass("hide"),$("#fighters .player-1 .fighting").addClass("hide"),$("#fighters .player-2 .fire").removeClass("hide"),$("#fighters .player-2 .hit").addClass("hide"),$("#fighters .player-2 .standing").removeClass("hide"),$("#fighters .player-2 .fighting").addClass("hide")):($("#fighters .player-2 .hit").addClass("hide"),$("#fighters .player-2 .standing").removeClass("hide"),$("#fighters .player-2 .fighting").addClass("hide"),$("#fighters .player-1 .fire").removeClass("hide"),$("#fighters .player-1 .hit").addClass("hide"),$("#fighters .player-1 .standing").removeClass("hide"),$("#fighters .player-1 .fighting").addClass("hide")),t("death",0),5==$("#battle-fight").attr("data-score")?(t("you-win-perfect",0),$("#subject .winner-item").fadeIn(500,function(){setTimeout(function(){$("#battle-fight").fadeOut(500,function(){r(l)})},3e3)})):(t("you-win",0),$("#subject .winner-name").fadeIn(500,function(){setTimeout(function(){$("#battle-fight").fadeOut(500,function(){r(l)})},3e3)}))}function r(e){t("battle-end",0),$("#battle-winner-info").fadeIn(500,function(){setTimeout(function(){$("#battle-winner-info").fadeOut(500,function(){var a=$("#battle-wrapper").attr("data-show-market");"true"==a?(t("di",0),$("#battle-di").fadeIn(500,function(){setTimeout(function(){$("#battle-winner-info").fadeOut(500,function(){d(e)})},6e3)})):d(e)})},5e3)})}function d(t){window.location=o+"index.php?application=battle&winner="+t+"&loser="+h}var o=$("body").attr("data-base-url"),u=$("body").attr("id"),f,l=$("#battle-fight").attr("data-winner-id"),h=$("#battle-fight").attr("data-loser-id");if("application-battle"==u){var c=$("body").attr("class"),p=document.createElement("audio");p.setAttribute("src",o+"assets/audio/vs.mp3"),p.setAttribute("autoplay","autoplay"),p.load(),p.play(),$("#battle-preview-box").delay(700).fadeIn(500,function(){$(this).delay(4e3).fadeOut(500,function(){$("#battle-fight").fadeIn(500);var e=$("#battle-fight").attr("data-music"),a=document.createElement("audio");a.setAttribute("src",o+"assets/audio/battle-"+e+".mp3"),a.setAttribute("autoplay","autoplay"),a.load(),a.play();var r=3e3;setTimeout(function(){t("round-1",0),$("#subject .round-1").fadeIn(500,function(){var e=$(this).attr("data-winner");setTimeout(function(){i(e),t("punch-1",0)},500),$(this).delay(r).fadeOut(500,function(){n(),t("round-2",0),$("#subject .round-2").fadeIn(500,function(){var e=$(this).attr("data-winner");setTimeout(function(){i(e),t("punch-2",0)},500),$(this).delay(r).fadeOut(500,function(){n(),t("round-3",0),$("#subject .round-3").fadeIn(500,function(){var e=$(this).attr("data-winner");setTimeout(function(){i(e),t("punch-3",0)},500),$(this).delay(r).fadeOut(500,function(){n(),t("round-4",0),$("#subject .round-4").fadeIn(500,function(){var e=$(this).attr("data-winner");setTimeout(function(){i(e),t("punch-1",0)},500),$(this).delay(r).fadeOut(500,function(){n(),t("round-5",0),$("#subject .round-5").fadeIn(500,function(){var e=$(this).attr("data-winner");setTimeout(function(){i(e),t("punch-2",0)},500),$(this).delay(r).fadeOut(500,function(){s(),a.pause()})})})})})})})})})})},1e3)})})}});